{
  "part": "Week 4",
  "objective": "Make it feel Warp-class: plugin hooks, offline history/search, command palette, polish & perf.",
  "tasks": [
    "Plugin host: WASM (wasmtime) + Lua (mlua) with a safe host API (read selection, overlays, palette items).",
    "Global command history index with Tantivy; fuzzy/semantic search (optional local embeddings later).",
    "Command palette (actions, recent dirs, snippets).",
    "Accessibility bridge (NSAccessibility semantics from grid).",
    "Perf pass: frame pacing @120Hz, glyph cache misses <0.1% after warmup, zero-copy scrollback slices.",
    "Crash reporting (offline logs) + error surfaces in UI.",
    "Packaging & codesign (macOS Hardened Runtime; notarize script)."
  ],
  "tests": [
    "Plugin sandbox tests (no unsafe host calls).",
    "History search latency < 30ms for 50k entries.",
    "Accessibility audit: VO can read current line and selection."
  ],
  "links_additional": [
    "https://github.com/bytecodealliance/wasmtime",
    "https://github.com/quickwit-oss/tantivy",
    "https://developer.apple.com/documentation/appkit/nsaccessibility"
  ],
  "after_completion_git": [
    "git add .",
    "git commit -m \"Week 4: plugins, history index, palette, a11y, perf, packaging\"",
    "git push"
  ]
}
